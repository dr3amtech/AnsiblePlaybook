---
- name: Web01
  debugger: true
  hosts: servers
  become: yes
  become_method: sudo
  gather_facts: no
  vars:
   ansible_python_interpreter: "/usr/local/bin/python2.7"
  pre_tasks:
    - name: Install python for Ansible
      raw: test -e /usr/local/bin/python2.7 || (pkg -y update && pkg install -y python2)
      changed_when: False
    - setup: # aka gather_facts
  tasks:
  - name: Install SBCL
    raw: pkg install sbcl
  - setup: # aka gather_facts
  - name: Install curl
    raw: pkg install curl 
  - name: Download quicklisp
    raw: curl -O https://beta.quicklisp.org/quicklisp.lisp
  - name: Load quicklisp
    raw: sbcl --load quicklisp.lisp
  - name: Install quick lisp
    raw: quicklisp-quickstart:install